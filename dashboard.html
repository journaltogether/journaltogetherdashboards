<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Journal Dashboard</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #f6f6f6;
      padding: 2rem;
    }
    .card {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      max-width: 700px;
      margin: auto;
    }
    input, button {
      width: 100%;
      padding: 0.7rem;
      margin-top: 0.6rem;
      font-size: 1rem;
    }
    button {
      cursor: pointer;
    }
    h2 {
      margin-top: 2rem;
    }
    ul {
      padding-left: 1.2rem;
    }
    .error {
      color: #b00020;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>Your Journal Dashboard</h1>
    <p>Enter the private token you received to view your dashboard.</p>

    <input id="token" placeholder="Paste your token here" />
    <button onclick="loadDashboard()">View Dashboard</button>

    <div id="output"></div>
  </div>

  <script>
    async function loadDashboard() {
      const token = document.getElementById("token").value.trim();
      const output = document.getElementById("output");
      output.innerHTML = "Loadingâ€¦";

      if (!token) {
        output.innerHTML = "<p class='error'>Please enter a token.</p>";
        return;
      }

      try {
        const res = await fetch(`/dashboards/${token}.json`);
        if (!res.ok) throw new Error("Not found");

        const data = await res.json();

        output.innerHTML = `
          <h2>Major Themes</h2>
          <ul>${data.major_themes.map(t => `<li>${t}</li>`).join("")}</ul>

          <h2>Shifts Over Time</h2>
          <p>${data.shifts_over_time}</p>

          <h2>Emotional Trend</h2>
          <p>${data.emotional_trend}</p>

          <h2>Blind Spots</h2>
          <ul>${data.blind_spots.map(t => `<li>${t}</li>`).join("")}</ul>

          <h2>Strengths</h2>
          <ul>${data.strengths.map(t => `<li>${t}</li>`).join("")}</ul>

          <h2>Growth Areas</h2>
          <ul>${data.growth_areas.map(t => `<li>${t}</li>`).join("")}</ul>

          <h2>Next Steps</h2>
          <ul>${data.next_steps.map(t => `<li>${t}</li>`).join("")}</ul>

          <h2>Weekly Prompts</h2>
          <ul>${data.weekly_prompts.map(t => `<li>${t}</li>`).join("")}</ul>
        `;
      } catch {
        output.innerHTML = "<p class='error'>Dashboard not found. Check your token.</p>";
      }
    }
  </script>

</body>
</html>
